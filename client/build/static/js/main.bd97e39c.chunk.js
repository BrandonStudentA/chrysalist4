(this["webpackJsonpchrysalis-app"]=this["webpackJsonpchrysalis-app"]||[]).push([[0],{36:function(e,t,n){e.exports=n(66)},41:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(31),c=n.n(u),s=n(10),o=(n(41),n(14)),i=n(18),l=n(35),m=n(1),d=n.n(m),p=n(2),h=n(4),f=n(5),v=n(7),b=n(6),y=n(11);Object(y.e)((function(e){return a.a.createElement("div",{className:"user-container"},e.users.map((function(t){return a.a.createElement("div",{key:t.id,className:"user-card",onClick:function(n){e.currentUser?e.history.push("/users/".concat(t.id)):e.history.push("/login"),window.scrollTo(0,0)}},a.a.createElement("h3",null,a.a.createElement("p",null,t.name)))})),a.a.createElement("div",{className:"user-card",onClick:function(){e.history.push("/new/user"),window.scrollTo(0,0)}},a.a.createElement("img",{alt:"Create a new Remedy"}),a.a.createElement("h3",null,"Create a new Remedy")))}));var E=n(34),g=n.n(E).a.create({baseURL:"https://ancient-scrubland-63876.herokuapp.com/"}),w=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/login",{auth:t});case 2:return n=e.sent,localStorage.setItem("authToken",n.data.token),g.defaults.headers.common.authorization="Bearer ".concat(n.data.token),e.abrupt("return",n.data.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/users/",{user:t});case 2:return n=e.sent,localStorage.setItem("authToken",n.data.token),g.defaults.headers.common.authorization="Bearer ".concat(n.data.token),e.abrupt("return",n.data.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("authToken"))){e.next=7;break}return g.defaults.headers.common.authorization="Bearer ".concat(t),e.next=5,g.get("/auth/verify");case 5:return n=e.sent,e.abrupt("return",n.data);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.put("/users/".concat(t),{user:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("/users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("new/remedies",{remedy:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/remedies/".concat(t,"/").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/moods");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).handleRegister=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j(r.state.authFormData);case 3:n=e.sent,r.setState({currentUser:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState(Object(o.a)({},t.target.name,t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={currentUser:null,authFormData:{username:"",email:"",password:""}},r}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"auth-container"},a.a.createElement("h2",null,"Register"),a.a.createElement("hr",null),a.a.createElement("form",{onSubmit:this.handleRegister},a.a.createElement("p",null,"Username:"),a.a.createElement("input",{name:"username",type:"text",value:this.state.authFormData.username,onChange:this.handleChange,required:!0}),a.a.createElement("p",null,"Email:"),a.a.createElement("input",{name:"email",type:"email",value:this.state.authFormData.email,onChange:this.handleChange,required:!0}),a.a.createElement("p",null,"Password:"),a.a.createElement("input",{name:"password",type:"password",value:this.state.authFormData.password,onChange:this.handleChange,required:!0}),a.a.createElement("hr",null),a.a.createElement("button",null,"Register")))}}]),n}(a.a.Component),U=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,"p")}}]),n}(r.Component),L=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null)}}]),n}(r.Component),I=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={moods:null},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,console.log("hello"),this.setState({moods:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.moods&&this.state.moods.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("div",null,a.a.createElement("td",null,a.a.createElement("img",{src:e.image_url,alt:""})," "),a.a.createElement("h3",null,e.name)))}));return a.a.createElement("div",null,e)}}]),n}(a.a.Component),B=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={currentUser:" ",isLoggedIn:!1,mood:[null],remedy:{title:"",description:"",user_id:"",mood_id:""}},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,!0===O&&this.setState({currentUser:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(U,{onClick:this.props.handleLoginButton}),a.a.createElement("div",null,a.a.createElement(D,null)),a.a.createElement("h1",null,"Welome To Chrysalis "),a.a.createElement("div",null," ",a.a.createElement(I,null)," "),a.a.createElement(L,{onClick:this.props.handleLoginButton}))}}]),n}(a.a.Component),N=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).handleChange=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState(Object(o.a)({},t.target.name,t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleLogin=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,w(r.state.authFormData);case 3:(n=e.sent)?r.setState({currentUser:n}):alert("wrong username or password");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={currentUser:!1,authFormData:{username:"",email:"",password:""}},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"auth-container"},a.a.createElement("h2",null,"login"),a.a.createElement("hr",null),a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleLogin()}},a.a.createElement("p",null,"Username:"),a.a.createElement("input",{name:"username",type:"text",value:this.state.authFormData.username,onChange:this.handleChange,required:!0}),a.a.createElement("p",null,"Password:"),a.a.createElement("input",{name:"password",type:"password",value:this.state.authFormData.password,onChange:this.handleChange,required:!0}),a.a.createElement("hr",null),a.a.createElement("button",{type:"submit"},"Login"),a.a.createElement(s.b,{to:"/register"},"Register")))}}]),n}(a.a.Component);function T(e){return a.a.createElement("header",null,a.a.createElement("h1",null,a.a.createElement(s.b,{to:"/",onClick:e.resetForm},"Chrysalist Mood App")),a.a.createElement("div",null,e.currentUser?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,e.currentadmin.username),a.a.createElement(L,{onClick:e.handleLogout,placeholder:"logout"})):a.a.createElement(U,{onClick:e.handleLoginButton,placeholder:"Login/register"})))}n(65);var q=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).getUsers=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,r.setState({users:t});case 4:case"end":return e.stop()}}),e)}))),r.newRemedy=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C(r.state.remedyForm);case 3:n=e.sent,r.setState((function(e){return{remedies:[].concat(Object(l.a)(e.remedies),[n]),remedyForm:{title:"",descriptiom:""}}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.editUser=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.userForm,e.next=3,x(t.id,t);case 3:n=e.sent,r.setState((function(e){return{users:e.users.map((function(e){return e.id===t.id?n:e}))}}));case 5:case"end":return e.stop()}}),e)}))),r.deleteUser=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t);case 2:r.setState((function(e){return{users:e.users.filter((function(e){return e.id!==t}))}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleFormChange=function(e){var t=e.target,n=t.name,a=t.value;r.setState((function(e){return{userForm:Object(i.a)({},e.userForm,Object(o.a)({},n,a))}}))},r.mountEditForm=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:n=e.sent,a=n.find((function(e){return e.id===parseInt(t)})),r.setState({userForm:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.resetForm=function(){r.setState({userForm:{name:"",photo:""}})},r.handleFormChange=function(e){var t=e.target,n=t.name,a=t.value;r.setState((function(e){return{userForm:Object(i.a)({},e.userForm,Object(o.a)({},n,a))}}))},r.mountEditForm=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:n=e.sent,a=n.find((function(e){return e.id===parseInt(t)})),r.setState({userForm:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.mountRemedyCreateForm=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:n=e.sent,a=n.find((function(e){return e.id===parseInt(t)})),r.setState({remedyForm:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.mountRemedyEditForm=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:n=e.sent,a=n.find((function(e){return e.id===parseInt(t)})),r.setState({remedyForm:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.resetForm=function(){r.setState({userForm:{name:"",photo:""}})},r.state={currentUser:null,authFormData:{username:"",email:"",password:""}},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getUsers(),e.next=3,O();case 3:(t=e.sent)&&this.setState({currentUser:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement(T,{handleLoginButton:this.handleLoginButton,handleLogout:this.handleLogout,currentUser:this.state.currentUser}),a.a.createElement(y.a,{exact:!0,path:"/login",render:function(){return a.a.createElement(N,{handleLogin:e.handleLogin,handleChange:e.authHandleChange,formData:e.state.authFormData})}}),a.a.createElement(y.a,{exact:!0,path:"/register",render:function(){return a.a.createElement(D,null)}}),a.a.createElement(y.a,{exact:!0,path:"/",render:function(){return a.a.createElement(B,null)}}),a.a.createElement(y.a,{exact:!0,path:"/",render:function(){return a.a.createElement(I,null)}}),"CreateRemedy",a.a.createElement(y.a,{path:"/remedies/:id",render:function(t){var n=t.match.params.id,r=e.state.remedies.find((function(e){return e.id===parseInt(n)}));return a.a.createElement(I,{id:n,remedy:r,handleFormChange:e.handleFormChange,mountRemedyEditForm:e.mountRemedyEditForm,editRemedy:e.editRemedy,RemedyForm:e.state.RemedyForm,deleteRemedy:e.deleteRemedy})}}),a.a.createElement(y.a,{path:"/remedies/:id",render:function(t){var n=t.match.params.id,r=e.state.remedies.find((function(e){return e.id===parseInt(n)}));return a.a.createElement(I,{id:n,remedy:r,handleFormChange:e.handleFormChange,mountRemedyEditForm:e.mountRemedyEditForm,editRemedy:e.editRemedy,RemedyForm:e.state.RemedyForm,deleteRemedy:e.deleteRemedy})}}))}}]),n}(a.a.Component),M=Object(y.e)(q);c.a.render(a.a.createElement(s.a,null,a.a.createElement(M,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.bd97e39c.chunk.js.map